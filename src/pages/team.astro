---
import Layout from '../layouts/Layout.astro';
import '../styles/team/team.css';

// --- COMPONENTES TEAM MODULARES ---
import HeroTeam from '../components/team/HeroTeam.astro';
import OriginsSection from '../components/team/OriginsSection.astro';
import TeamMarquee from '../components/team/TeamMarquee.astro';
import RosterGrid from '../components/team/RosterGrid.astro';

import '../styles/team/animation.css';
const pageTitle = "Conoce al equipo";
---

<Layout title={pageTitle}>
    <main>
        <HeroTeam />
        
        <OriginsSection />
        
        <TeamMarquee />
        
        <RosterGrid />
    </main>
    <script>
    import { initScrollAnimations } from '../scripts/scrollAnimations.js';
    
    let cleanupScrollFx: (() => void) | undefined;
    
    document.addEventListener('astro:page-load', () => {
        // Limpiar instancia anterior si existe
        if (cleanupScrollFx) {
            cleanupScrollFx();
        }
        
        // Inicializar y guardar función de limpieza
        cleanupScrollFx = initScrollAnimations() as (() => void);
    });
    
    document.addEventListener('astro:before-swap', () => {
        // Cleanup antes de cambiar de página
        if (cleanupScrollFx) {
            cleanupScrollFx();
            cleanupScrollFx = undefined;
        }
    });
</script>
</Layout>