---
import '../styles/widget_chat.css';
---

<div 
    id="chat-trigger" 
    class="chat-trigger" 
    style="background-image: url('/img/page/IMGChatv2.webp');"
>
</div>

<div id="chat-window" class="chat-window">
    <div class="chat-window__header">
        <div class="chat-header__info">
            <div class="chat-header__status-dot"></div>
            <span class="chat-header__title">Asistente Jaguar</span>
        </div>
        <span id="chat-close-btn" class="chat-header__close">✖</span>
    </div>

    <div id="chat-messages" class="chat-window__messages"></div>

    <div id="typing-indicator" class="chat-window__typing">
        Jaguar está escribiendo<span class="dot-flashing"></span>
    </div>

    <div id="suggestions-container" class="chat-window__suggestions"></div>

    <div class="chat-window__input-area">
        <input type="text" id="chat-input" class="chat-input__field" placeholder="Escribe tu duda..." autocomplete="off">
        <button id="chat-send-btn" class="chat-input__send">Enviar</button>
    </div>
</div>

<script>
    // Importamos la lógica desde el archivo separado
    import { initChatWidget } from '../scripts/chatWidget.js';

    // Ejecutamos en cada navegación (compatible con View Transitions)
    document.addEventListener('astro:page-load', () => {
        initChatWidget();
    });
</script>